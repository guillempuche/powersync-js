"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[971],{2460:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>o});var a=s(4246),i=s(1670);const t={id:"index",title:"PowerSync React Native SDK Docs",sidebar_label:"Readme",sidebar_position:0,custom_edit_url:null},c="PowerSync React Native SDK",r={id:"index",title:"PowerSync React Native SDK Docs",description:"Monorepo for all things React Native and PowerSync.",source:"@site/docs/index.md",sourceDirName:".",slug:"/",permalink:"/powersync-react-native-sdk/",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:0,frontMatter:{id:"index",title:"PowerSync React Native SDK Docs",sidebar_label:"Readme",sidebar_position:0,custom_edit_url:null}},l={},o=[{value:"Monorepo Structure",id:"monorepo-structure",level:2},{value:"Git Submodules",id:"git-submodules",level:2},{value:"Versioning",id:"versioning",level:2},{value:"Development Packages",id:"development-packages",level:3},{value:"Production Packages",id:"production-packages",level:3},{value:"React Native Quick SQLite Development",id:"react-native-quick-sqlite-development",level:2},{value:"Testing Supabase example app",id:"testing-supabase-example-app",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"powersync-react-native-sdk",children:"PowerSync React Native SDK"}),"\n",(0,a.jsx)(n.p,{children:"Monorepo for all things React Native and PowerSync."}),"\n",(0,a.jsx)(n.h2,{id:"monorepo-structure",children:"Monorepo Structure"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/powersync-ja/powersync-supabase-react-native-todolist-demo/tree/e6a1d045ab8244041651757402adc562a6699a4f",children:"apps/supabase-todolist"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"An Expo React native app using Supabase."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"./packages/powersync-sdk-common/README.md",children:"packages/powersync-sdk-common"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"A Typescript implementation of a PowerSync database connector and streaming sync bucket implementation."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"./packages/powersync-sdk-react-native/README.md",children:"packages/powersync-sdk-react-native"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["An extension of ",(0,a.jsx)(n.code,{children:"packages/powersync-sdk-common"})," which provides React Native specific implementations of abstracted features."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h1,{id:"development",children:"Development"}),"\n",(0,a.jsx)(n.h2,{id:"git-submodules",children:"Git Submodules"}),"\n",(0,a.jsx)(n.p,{children:"After cloning this repo be sure to init the Git submodules"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git submodule init && git submodule update\n"})}),"\n",(0,a.jsx)(n.p,{children:"This monorepo uses Yarn as it works well with React native."}),"\n",(0,a.jsx)(n.p,{children:"Install workspace dependencies"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn install\n"})}),"\n",(0,a.jsx)(n.p,{children:"Build packages"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn build:packages\n"})}),"\n",(0,a.jsx)(n.h2,{id:"versioning",children:"Versioning"}),"\n",(0,a.jsx)(n.h3,{id:"development-packages",children:"Development Packages"}),"\n",(0,a.jsxs)(n.p,{children:["Development packages can be published by manually triggering the ",(0,a.jsx)(n.code,{children:"dev-packages"})," workflow. Development packages are versioned as ",(0,a.jsx)(n.code,{children:"0.0.0-{tag}-DATETIMESTAMP"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"production-packages",children:"Production Packages"}),"\n",(0,a.jsx)(n.p,{children:"Pull requests should contain Changesets for changed packages."}),"\n",(0,a.jsx)(n.p,{children:"Add changesets with"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-Bash",children:"yarn changeset add\n"})}),"\n",(0,a.jsx)(n.p,{children:"Merging a PR with Changesets will automatically create a PR with version bumps. That PR will be merged when releasing."}),"\n",(0,a.jsx)(n.h2,{id:"react-native-quick-sqlite-development",children:"React Native Quick SQLite Development"}),"\n",(0,a.jsxs)(n.p,{children:["Testing live development changes to ",(0,a.jsx)(n.code,{children:"@journeyapps/react-native-quick-sqlite"})," will not with with standard ",(0,a.jsx)(n.code,{children:"yarn link"})," commands. Metro does not work well with symlinks ",(0,a.jsx)(n.a,{href:"https://github.com/facebook/metro/issues/286",children:"https://github.com/facebook/metro/issues/286"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The process of releasing development packages for ",(0,a.jsx)(n.code,{children:"@journeyapps/react-native-quick-sqlite"})," for each change can be tedious and slow. A faster (and hackier) method is to use ",(0,a.jsx)(n.a,{href:"https://www.npmjs.com/package/mtsl",children:"mtsl"})," which will watch and copy the package into this workspace's ",(0,a.jsx)(n.code,{children:"node_modules"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install -g mtsl\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mtsl add -s "[source path to your react-native-quick-sqlite repo folder]" -d "[this workspaces root node_modules folder]"/@journeyapps/react-native-quick-sqlite\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mtsl start "[the id returned from step above]"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"testing-supabase-example-app",children:"Testing Supabase example app"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd apps/supabase-todolist\n"})}),"\n",(0,a.jsx)(n.p,{children:"Test on either Android or iOS"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn ios\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1670:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>c});var a=s(7378);const i={},t=a.createContext(i);function c(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);